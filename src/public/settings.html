<!doctype html>
<html lang="en">
  <head>
    <title>Glicocheck | Settings</title>
    <link rel="icon" type="image/x-icon" href="./includes/imgs/tab-icon.png">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Glicocheck is a web platform to control your daily glucose level.">
    <!-- CHECK AUTHENTICATION -->
    <script src="./includes/js/sessionUtils.js"></script>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pattaya&display=swap" rel="stylesheet">
    <!-- Custom style -->
    <link href="./includes/styles/dashboard.css" rel="stylesheet">
    <link href="./includes/styles/settings.css" rel="stylesheet">
  </head>

  <body>    
    <header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow header-visibility">
        
        <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3 fs-6">
            <img class="glicocheck-icon" src="./includes/imgs/tab-icon.png" alt="Glicocheck icon">
        </a>

        <!-- TOGGLE MENU -->
        <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" 
                data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" 
                aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
    </header>
  
    <div class="container-fluid default-background-color">
        <div class="row">
            <!-- SIDEMENU -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3 sidebar-sticky">

                    <div class="logo-sidebar-panel">
                        <img class="logo-sidebar" src="./includes/imgs/glicocheck-logo.png" alt="Glicocheck logo">
                    </div>

                    <ul class="nav flex-column">
                        <li class="nav-item item-sidemenu">
                            <a class="nav-link" aria-current="page" href="./home.html">
                            <span data-feather="home" class="align-middle"></span>
                            Home
                            </a>
                        </li>
                        <li class="nav-item">
                            <div class="item-sidemenu">
                              <a href="#" class="nav-link" data-bs-toggle="collapse" data-bs-target="#dashboard-collapse" aria-expanded="false">
                                <span data-feather="user" class="align-middle"></span>
                                My Account
                                <span class="ms-2 arrow-icon" data-feather="chevron-down"></span>
                              </a>
                            </div>
                            <div class="collapse" id="dashboard-collapse">
                              <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                                <li class="m-2 ps-2"><a href="./profile.html" class="nav-link item-sidemenu">Profile</a></li>
                                <li class="m-2 ps-2"><a href="./security.html" class="nav-link item-sidemenu">Security</a></li>
                              </ul>
                            </div>
                          </li>           
                        <li class="nav-item item-sidemenu">
                            <a class="nav-link" href="./diary.html">
                            <span data-feather="book-open" class="align-middle"></span>
                            Diary
                            </a>
                        </li>
                        <li class="nav-item item-sidemenu">
                            <a class="nav-link" href="#">
                            <span data-feather="settings" class="align-middle"></span>
                            Settings
                            </a>
                        </li>
                        <li class="nav-item item-sidemenu">
                            <a class="nav-link" href="#" onclick="logOut()">
                            <span data-feather="log-out" class="align-middle"></span>
                            Log out
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
            <!-- END - SIDEMENU -->

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 default-panel-color round-border-top-left main-content">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 ms-3 border-bottom">
                    <h2>
                        <span data-feather="settings" class="align-middle pb-1"></span>
                        Settings
                    </h2>
                </div>

                <div class="container">
                    <div class="row mb-3">
                        <div class="w-100 bg-white">                            
                            <div>
                                <!-- PANEL MEASUREMENT UNIT -->                                
                                <div class="shadow card mt-5 p-4">
                                    <h5 class="mb-4 fw-bold">Glycemia Measurement Unity</h5>
                                    <div id="panel-fields-glycemia-measurement-unity" class="mb-2">
                                        <select id="field_MeasurementUnity" class="form-select" onchange="updateGlycemiaValueLabel()">
                                            <option value="1" selected>milligrams per decilitre (mg/dL)</option>
                                            <option value="2">millimoles per litre (mmol/L)</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- PANEL GLYCEMIA RANGE -->                                
                                <div class="shadow card mt-4 p-4">
                                    <h5 class="mb-4 fw-bold">Glycemia range</h5>
                                    
                                    <!-- HYPOGLYCEMIA VALUE -->
                                    <div id="panel-fields-glycemia-range">
                                        <div class="panel-slider-range">
                                            <label for="field_Hypoglycemia" class="form-label text-muted">
                                                Hypoglycemia:
                                            </label>
                                            <span class="fw-bolder"> 
                                                <span id="valueHypo">70</span> (<span id="measurement_unity_hypo">mg/dL</span>)
                                            </span> 
                                            <input type="range" id="hypoRange" class="form-range slider"
                                            data-bs-toggle="tooltip" data-bs-placement="bottom" 
                                            title="Values lower than this will be considered hypoglycemia."
                                            oninput="valueHypo.innerText = this.value">
                                        </div>

                                        <!-- HYPERGLYCEMIA VALUE -->
                                        <div class="panel-slider-range">
                                            <label for="field_Hyperglycemia" class="form-label text-muted">
                                                Hyperglycemia:
                                            </label>
                                            <span class="fw-bolder"> 
                                                <span id="valueHyper">160</span> (<span id="measurement_unity_hyper">mg/dL</span>)
                                            </span> 
                                            <input type="range" id="hyperRange" class="form-range slider"
                                            data-bs-toggle="tooltip" data-bs-placement="bottom" 
                                            title="Values higher than this will be considered hyperglycemia."
                                            oninput="valueHyper.innerText = this.value">
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- PANEL MEAL TIME -->                                
                                <div class="shadow card mt-4 p-4">
                                    <h5 class="mb-4 fw-bold">Meal time</h5>
                                    <div class="row">
                                        <div class="card card-meal-time">
                                            <div class="card-body">
                                                <h5 class="card-title">Breakfast</h5>
                                                <div class="mb-3">
                                                    <label for="field_breakfast_pre" class="form-label text-muted">Preprandial</label>
                                                    <input type="time" id="field_breakfast_pre" class="form-control text-center" 
                                                    onchange="updatePosprandial(this, field_breakfast_pos)" required>
                                                </div>  

                                                <div class="mb-3">
                                                    <label for="field_breakfast_pos" class="form-label text-muted">Posprandial</label>
                                                    <input type="time" id="field_breakfast_pos" class="form-control text-center" disabled>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="card card-meal-time">
                                            <div class="card-body">
                                                <h5 class="card-title">Lunch</h5>
                                                <div class="mb-3">
                                                    <label for="field_lunch_pre" class="form-label text-muted">Preprandial</label>
                                                    <input type="time" id="field_lunch_pre" class="form-control text-center"
                                                    onchange="updatePosprandial(this, field_lunch_pos)"
                                                    min="09:00" max="18:00">
                                                </div>  

                                                <div class="mb-3">
                                                    <label for="field_lunch_pos" class="form-label text-muted">Posprandial</label>
                                                    <input type="time" id="field_lunch_pos" class="form-control text-center" disabled>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="card card-meal-time">
                                            <div class="card-body">
                                                <h5 class="card-title">Dinner</h5>
                                                <div class="mb-3">
                                                    <label for="field_dinner_pre" class="form-label text-muted">Preprandial</label>
                                                    <input type="time" id="field_dinner_pre" class="form-control text-center" onchange="updatePosprandial(this, field_dinner_pos)">
                                                </div>  

                                                <div class="mb-3">
                                                    <label for="field_dinner_pos" class="form-label text-muted">Posprandial</label>
                                                    <input type="time" id="field_dinner_pos" class="form-control text-center" disabled>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="card card-meal-time">
                                            <div class="card-body">
                                                <h5 class="card-title">Bed time</h5>
                                                <div class="mb-3">
                                                    <label for="field_sleep_time" class="form-label text-muted">Preprandial</label>
                                                    <input type="time" id="field_sleep_time" class="form-control text-center">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- PANEL BUTTONS -->
                                <div class="mt-5 mb-3 panel-buttons">
                                    <button type="submit" class="btn btn-primary" id="btnSaveSettings">
                                        <span data-feather="save"></span>
                                        Save Changes
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <!-- ICON -->
    <script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js" 
    integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE" 
    crossorigin="anonymous"></script>
    <script>
        'use strict'
        feather.replace({ 'aria-hidden': 'true' })
    </script>
    <!-- For toggle menu. -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" 
    crossorigin="anonymous"></script>
    <!-- SWEET ALERT -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js" 
    integrity="sha384-RIQuldGV8mnjGdob13cay/K1AJa+LR7VKHqSXrrB5DPGryn4pMUXRLh92Ev8KlGF" 
    crossorigin="anonymous"></script>
    <!-- SETTINGS -->
    <script src="./includes/js/settings.js" defer></script>
  </body>
</html>